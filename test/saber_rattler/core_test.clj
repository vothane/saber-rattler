(ns saber-rattler.core-test
  (:require [clojure.test :refer :all]
            [saber-rattler.core :refer :all])
  (:use [cascalog.api]))

(def outs
  [["Fourseam" 2948 40.06 30.36 37.55 16.28 8.62 13.03 3.90 3.22 4.31 1.59 0.71] ["Sinker" 1183 39.98 22.06 44.21 17.41 7.35 19.61 9.81 4.40 4.40 1.01 0.42] ["Change" 205 47.80 22.93 40.98 12.20 12.20 16.59 9.76 4.88 1.46 0.49 0.98] ["Slider" 1930 29.79 40.16 49.53 14.66 19.95 15.03 5.60 3.37 3.94 2.12 0.47] ["Curve" 608 37.66 34.38 49.01 13.82 21.38 13.65 6.91 3.13 3.29 0.33 0.49] ["Cutter" 1502 31.56 30.09 50.13 21.11 12.78 16.71 8.92 2.86 3.93 1.00 0.60] ["Split" 339 43.07 26.25 50.44 14.45 19.76 16.22 9.14 4.42 2.36 0.30 0.00] ["Slow Curve" 446 44.39 38.57 27.35 6.50 10.99 10.09 4.04 2.47 3.14 0.45 0.67]]
)

(def avgs
  [["Fourseam" 2948 525 141 102 3 80 26 4 21 0.250 0.434 0.185 0.303] ["Sinker" 1183 278 47 29 8 55 17 2 5 0.284 0.414 0.130 0.327] ["Change" 205 39 4 5 0 9 3 0 2 0.359 0.590 0.231 0.364] ["Slider" 1930 567 276 43 4 61 18 0 9 0.155 0.235 0.079 0.280] ["Curve" 608 207 124 7 2 13 3 1 3 0.097 0.164 0.068 0.213] ["Cutter" 1502 289 39 23 4 46 11 3 9 0.239 0.391 0.152 0.249] ["Split" 339 95 40 1 0 16 4 0 0 0.211 0.253 0.042 0.364] ["Slow Curve" 446 69 23 1 1 11 2 0 3 0.232 0.391 0.159 0.302]]
)

;(query? "Yu Darvish"
  (?<- (stdout) [?pitch ?ball ?strike ?swing ?foul]; ?b1 ?b2 ?b3 ?hr]
    (outs ?pitch ?count ?ball ?strike ?swing ?foul ?whiffs ?bip ?gb ?ld ?fb ?pu ?hr) 
    ;(avgs ?pitch ?count ?ab ?k ?bb ?hbp ?b1 ?b2 ?b3 ?hr ?baa ?slg ?iso ?babip) 
    (= ?pitch "Cutter"));)
